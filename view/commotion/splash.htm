<%+header%>

<ul class="tabs">
  <li class="tabmenu-item-splashtext">
    <a href="<%=controller%>/admin/services/splash/splashtext/">Splashtext</a>
  </li>
</ul>

<form method="post" action="<%=controller%>/admin/services/splash/submit">
  <div>
		<!--<script type="text/javascript" src="/luci-static/resources/cbi.js"></script>-->
  </div>
  <div class="cbi-map" id="cbi-commotion-splash">
    <h2><a id="content" name="content">Captive Portal</a></h2>
    <div class="cbi-map-descr">Nodogsplash offers a simple way to provide restricted access to an internet connection.</div>
    <fieldset class="cbi-section" id="cbi-commotion-splash-general">
      <legend>General</legend>
      <div class="cbi-section-node" id="cbi-commotion-splash-general">
	<div class="cbi-value" id="cbi-commotion-splash-general-leasetime">
	  <label class="cbi-value-title" for="cbid.commotion-splash.general.leasetime">Clearance time</label>
	  <div class="cbi-value-field">
	    <input type="text" class="cbi-input-text" name="cbid.commotion-splash.general.leasetime" id="cbid.commotion-splash.general.leasetime" value="<%=leasetime%>" /><br />
	    <div class="cbi-value-description">
	      <span class="cbi-value-helpicon"><img src="/luci-static/resources/cbi/help.gif" alt="help" /></span>
		Clients that have accepted the captive portal are allowed to use the network for that many hours.
	    </div>
	  </div>
	</div>
      </div>
      <br />
    </fieldset>
    
    
    
    <!-- !!!!!!!!!!!!  after-authentication page, redirect to original request or to another custom page !!!!!!!! -->
    
    
<!-- /nsection -->
<!-- tblsection -->
<fieldset class="cbi-section" id="cbi-commotion-splash-ifaces">
  <legend>Interfaces</legend><div class="cbi-section-descr">Interfaces that are used for Splash.</div>
  <div class="cbi-section-node">
    <table class="cbi-section-table">
      <tr class="cbi-section-table-titles">
        <th class="cbi-section-table-cell">Network</th>
	<th class="cbi-section-table-cell"></th>
	<th class="cbi-section-table-cell">&#160;</th>
      </tr>
      <tr class="cbi-section-table-descr">
        <th class="cbi-section-table-cell">Intercept client traffic on this Interface</th>
	<th class="cbi-section-table-cell"></th>
	<th class="cbi-section-table-cell"></th>
      </tr>
      <tr class="cbi-section-table-row">
        <td class="cbi-value-field">
          <div id="cbi-commotion-splash-zones">
	    <select class="cbi-input-select" id="cbid.commotion-splash.zone" name="cbid.commotion-splash.zone" size="1">
	      <%- for zone in splash.zones do
	        if splash.zone_selected == zone then -%>
		  <option id="cbi-commotion-splash-zone-<%=zone%>" value="<%=zone%>" selected="selected"><%=zone%></option>
		<% else %>
		  <option id="cbi-commotion-splash-zone-<%=zone%>" value="<%=zone%>"><%=zone%></option>
	      <% end %>
	    </select>
	  </div>
	  <div id="cbip-commotion-splash-zone"></div>
	</td>
	<td class="cbi-value-field">
	  <div id="cbi-commotion-splash-network">
	    <select class="cbi-input-select" id="cbid.commotion-splash.network" name="cbid.commotion-splash.network" size="1">
	      <%- for network in splash.networks do
	        if splash.network_selected == network then -%>
		  <option id="cbi-commotion-splash-network-<%=network%>" value="<%=network%>" selected="selected"><%=network%></option>
		<% else %>
		  <option id="cbi-commotion-splash-network-<%=network%>" value="<%=network%>"><%=network%></option>
	      <% end %>
	    </select>
	  </div>
	  <div id="cbip-commotion-splash-network"></div>
	</td>
	<td class="cbi-section-table-cell">
	  <input class="cbi-button cbi-button-remove" type="submit" value="Delete" name="cbi.rts.commotion-splash" alt="Delete" title="Delete" />
	</td>
      </tr>
    </table>
    <div class="cbi-section-create cbi-tblsection-create">
      <input class="cbi-button cbi-button-add" type="submit" value="Add" name="cbi.cts.commotion-splash.iface." title="Add" />
    </div>
  </div>
</fieldset>
<!-- /tblsection --><!-- tblsection -->
<fieldset class="cbi-section" id="cbi-commotion-splash-whitelist">
  <legend>Whitelist</legend>
  <div class="cbi-section-descr">MAC addresses of whitelisted clients. These do not need to accept the splash and are not bandwidth limited.</div>
  <div class="cbi-section-node">
    <table class="cbi-section-table">
      <tr class="cbi-section-table-titles">
        <th class="cbi-section-table-cell">MAC Address</th>
	<th class="cbi-section-table-cell">&#160;</th>
      </tr>
      <tr class="cbi-section-table-descr">
        <th class="cbi-section-table-cell"></th>
	<th class="cbi-section-table-cell"></th>
      </tr>
      <tr class="cbi-section-table-row">
        <td class="cbi-value-field">
          <div id="cbi-commotion-splash-mac">
	    <input type="text" class="cbi-input-text" name="cbid.commotion-splash.mac" id="cbid.commotion-splash.mac" value="" />
	  </div>
	  <div id="cbip-commotion-splash-mac"></div>
        </td>
        <td class="cbi-section-table-cell">
	  <input class="cbi-button cbi-button-remove" type="submit" value="Delete" name="cbi.rts.commotion-splash" alt="Delete" title="Delete" />
        </td>
      </tr>
    </table>
    <div class="cbi-section-create cbi-tblsection-create">
      <input class="cbi-button cbi-button-add" type="submit" value="Add" name="cbi.cts.commotion-splash.whitelist." title="Add" />
    </div>
  </div>
</fieldset>
<!-- /tblsection --><!-- tblsection -->
<fieldset class="cbi-section" id="cbi-commotion-splash-blacklist">
  <legend>Blacklist</legend>
  <div class="cbi-section-descr">MAC addresses in this list are blocked.</div>
  <div class="cbi-section-node">
    <table class="cbi-section-table">
      <tr class="cbi-section-table-titles">
        <th class="cbi-section-table-cell">MAC Address</th>
	<th class="cbi-section-table-cell">&#160;</th>
      </tr>
      <tr class="cbi-section-table-descr">
        <th class="cbi-section-table-cell"></th>
	<th class="cbi-section-table-cell"></th>
      </tr>
      <tr class="cbi-section-table-row">
	<td class="cbi-value-field">
          <div id="cbi-commotion-splash-mac">
	    <input type="text" class="cbi-input-text" name="cbid.commotion-splash.mac" id="cbid.commotion-splash.mac" value="" />
	  </div>
	  <div id="cbip-commotion-splash-mac"></div>
        </td>
        <td class="cbi-section-table-cell">
	  <input class="cbi-button cbi-button-remove" type="submit" value="Delete" name="cbi.rts.commotion-splash" alt="Delete" title="Delete" />
        </td>
      </tr>
    </table>
    <div class="cbi-section-create cbi-tblsection-create">
      <input class="cbi-button cbi-button-add" type="submit" value="Add" name="cbi.cts.commotion-splash.blacklist." title="Add" />
    </div>
  </div>
</fieldset>
<!-- /tblsection --><!-- tblsection -->
<fieldset class="cbi-section" id="cbi-commotion-splash-subnet">
  <legend>Allowed hosts/subnets</legend>
  <div class="cbi-section-descr">Hosts and Networks that are listed here are excluded from splashing, i.e. they are always allowed.</div>
  <div class="cbi-section-node">
    <table class="cbi-section-table">
      <tr class="cbi-section-table-titles">
        <th class="cbi-section-table-cell">IP Address</th>
	<th class="cbi-section-table-cell">Netmask</th>
	<th class="cbi-section-table-cell">&#160;</th>
      </tr>
      <tr class="cbi-section-table-descr">
	<th class="cbi-section-table-cell"></th>
	<th class="cbi-section-table-cell">optional when using host addresses</th>
	<th class="cbi-section-table-cell"></th>
      </tr>
      <tr class="cbi-section-table-row">
        <td class="cbi-value-field">
          <div id="cbi-commotion-splash-ipaddr">
            <input type="text" class="cbi-input-text" name="cbid.commotion-splash.ipaddr" id="cbid.commotion-splash.ipaddr" value="" />
          </div>
          <div id="cbip-commotion-splash-ipaddr"></div>
        </td>
        <td class="cbi-value-field">
          <div id="cbi-commotion-splash-netmask">
            <input type="text" class="cbi-input-text" name="cbid.commotion-splash.netmask" id="cbid.commotion-splash.netmask" value="" />
          </div>
          <div id="cbip-commotion-splash-netmask"></div>
        </td>
        <td class="cbi-section-table-cell">
          <input class="cbi-button cbi-button-remove" type="submit" value="Delete" name="cbi.rts.commotion-splash" alt="Delete" title="Delete" />
	</td>
      </tr>
    </table>
    <div class="cbi-section-create cbi-tblsection-create">
      <input class="cbi-button cbi-button-add" type="submit" value="Add" name="cbi.cts.commotion-splash.subnet." title="Add" />
    </div>
  </div>
</fieldset>
<!-- /tblsection -->
	<br />
</div>
<div class="cbi-page-actions">
  <input class="cbi-button cbi-button-apply" type="submit" name="cbi.apply" value="Save &#38; Apply" />		
  <input class="cbi-button cbi-button-save" type="submit" value="Save" />
  <input class="cbi-button cbi-button-reset" type="reset" value="Reset" />
</div>
</form>